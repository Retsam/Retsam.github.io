<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 4.16.0"/><style data-href="/styles.7c6baefb7c443f10c5d7.css" data-identity="gatsby-global-css">.page-header{border-bottom:1px solid #fff;border-top:5px solid var(--dark-grey-color);min-height:55px}.page-header a{color:var(--dark-grey-color);float:left;font-size:26px;font-weight:300;letter-spacing:-1px;line-height:54px;margin-bottom:0}.page-content{padding:30px 0}.post-subtitle,.post-title{color:var(--brand-color)}.post-subtitle{font-family:Times New Roman,Times,serif;font-variant:small-caps}html{--background-color:#171c19;--dark-grey-color:#8d998d;--text-color:#8dc4a5;--brand-color:#4bae42}body{background-color:var(--background-color);color:var(--text-color);display:flex;flex-direction:column;font:400 16px/1.5 -apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;margin:0;min-height:100vh;padding:0}a{color:var(--brand-color);text-decoration:none}a:hover{color:var(--text-color);text-decoration:underline}.wrapper{margin-left:auto;margin-right:auto;max-width:940px;padding-left:30px;padding-right:30px}pre{background-color:#fff;border-bottom:1px solid #999;border-left:1px solid #999;color:#000;margin-bottom:3rem;padding:12px;position:relative}pre,pre.shiki{overflow-x:auto}pre.shiki:hover .dim{opacity:1}pre.shiki div.dim{opacity:.5}pre.shiki div.dim,pre.shiki div.highlight{margin:0;padding:0}pre.shiki div.highlight{background-color:#f1f8ff;opacity:1}pre.shiki div.line{min-height:1rem}pre.shiki .language-id{display:none}pre.twoslash{border-color:#719af4}pre.twoslash:hover data-lsp{border-color:#747474}pre.twoslash data-lsp:hover:before{background-color:#3f3f3f;border-radius:2px;color:#fff;content:attr(lsp);font-family:JetBrains Mono,Menlo,Monaco,Consolas,Courier New,monospace;font-size:14px;padding:5px 8px;position:absolute;text-align:left;-webkit-transform:translateY(1rem);transform:translateY(1rem);white-space:pre-wrap;z-index:100}pre .code-container{overflow:auto}pre .code-container>a{border:1px solid #719af4;border-radius:4px;bottom:8px;color:#719af4;opacity:0;padding:0 8px;position:absolute;right:8px;text-decoration:none;transition-timing-function:ease;transition:opacity .3s}@media (prefers-reduced-motion:reduce){pre .code-container>a{transition:none}}pre .code-container>a:hover{background-color:#719af4;color:#fff}pre .code-container:hover a{opacity:1}pre code{-webkit-overflow-scrolling:touch;font-family:JetBrains Mono,Menlo,Monaco,Consolas,Courier New,monospace;font-size:15px;white-space:pre}pre code a{text-decoration:none}pre data-err{background:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='6' height='3' viewBox='0 0 6 3'%3E%3Cg fill='%23c94824'%3E%3Cpolygon points='5.5 0 2.5 3 1.1 3 4.1 0'/%3E%3Cpolygon points='4 0 6 2 6 .6 5.4 0'/%3E%3Cpolygon points='0 2 1 3 2.4 3 0 .6'/%3E%3C/g%3E%3C/svg%3E") repeat-x 0 100%;padding-bottom:3px}pre .query{color:#137998;display:inline-block;margin-bottom:10px}pre .error,pre .error-behind{display:block;margin-bottom:4px;margin-left:-14px;margin-top:8px;padding:6px 6px 6px 14px;white-space:pre-wrap;width:calc(100% - 20px)}pre .error{align-items:center;background-color:#fee;border-left:2px solid #bf1818;color:#000;display:flex;position:absolute}pre .error .code{display:none}pre .error-behind{color:#fee;-webkit-user-select:none;-ms-user-select:none;user-select:none;visibility:transparent}pre .arrow{background-color:#eee;border-left:1px solid #eee;border-top:1px solid #eee;height:8px;margin-left:.1rem;position:relative;top:-7px;-webkit-transform:translateY(25%) rotate(45deg);transform:translateY(25%) rotate(45deg);width:8px}pre .popover{background-color:#eee;border-radius:3px;display:inline-block;margin-bottom:10px;margin-top:10px;padding:0 .5rem .3rem}pre .inline-completions ul.dropdown{background-color:#dcdcdc;border-left:4px solid #4b9edd;color:grey;display:inline-block;font-family:var(--code-font);font-size:.8rem;margin:0;padding:0;position:absolute;width:240px}pre .inline-completions ul.dropdown:before{background-color:#4b9edd;content:" ";left:-3px;position:absolute;top:-1.2rem;width:2px}pre .inline-completions ul.dropdown li{margin-bottom:4px;overflow-x:hidden;padding-left:4px}pre .inline-completions ul.dropdown li.deprecated{text-decoration:line-through}pre .inline-completions ul.dropdown li span.result-found{color:#4b9edd}pre .inline-completions ul.dropdown li span.result{color:#000;display:inline-block;width:100px}.dark-theme .markdown pre{background-color:#d8d8d8;border-color:#ddd;-webkit-filter:invert(98%) hue-rotate(180deg);filter:invert(98%) hue-rotate(180deg)}data-lsp{border-bottom:1px dotted transparent;transition-timing-function:ease;transition:border-color .3s}@media (prefers-reduced-motion:reduce){data-lsp{transition:none}}.tag-container{position:relative}.tag-container .twoslash-annotation{background-color:#fcf3d9 bb;color:#187abf;font-family:JetBrains Mono,Menlo,Monaco,Consolas,Courier New,monospace;position:absolute;right:-10px;width:200px}.tag-container .twoslash-annotation p{font-size:.8rem;line-height:.9rem;text-align:left}.tag-container .twoslash-annotation svg{float:left;margin-left:-44px}.tag-container .twoslash-annotation.left{left:-200px;right:auto}.tag-container .twoslash-annotation.left svg{float:right;margin-right:-5px}pre .logger{align-items:center;color:#000;display:flex;padding:6px 6px 6px 8px;white-space:pre-wrap;width:calc(100% - 19px)}pre .logger svg{margin-right:9px}pre .logger.error-log{background-color:#fee;border-left:2px solid #bf1818}pre .logger.warn-log{background-color:#ffe;border-left:2px solid #eae662}pre .logger.log-log{background-color:#e9e9e9;border-left:2px solid #ababab}pre .logger.log-log svg{margin-left:6px;margin-right:9px}.article-list-title{margin-bottom:5px}.article-list-datestamp{color:var(--dark-grey-color);margin-left:30px}</style></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><header class="page-header"><title>Is Typescript&#x27;s Set Theory Backwards?</title><div class="wrapper"><a rel="author" href="/">Flotsam &amp; Retsam</a></div></header><main class="page-content"><div class="wrapper"><h1 class="post-title">Is Typescript&#x27;s Set Theory Backwards?</h1><h2 class="post-subtitle">Betteridge says &quot;no&quot;</h2><h3>The &quot;Mystery&quot;</h3><p>There&#x27;s a lot of overlap between the mathematical concept of Set Theory, and the concept of a Type system.</p><p>Typescript has <code>|</code> and <code>&amp;</code> which are the union and intersection operators. These are direct analogues of the concept of unions and intersections in Set Theory.</p><p>Here&#x27;s what a intersection looks like in set theory:</p><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:643px">
      <a class="gatsby-resp-image-link" href="/static/2630b4fa9a4a437ca3c466cc4218e9b4/b5bda/SetVenn.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:77.33333333333333%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAC4jAAAuIwF4pT92AAABaklEQVQ4y52U6Y6CQBCEef+3U4zBEC9Q8VYOb7E3X2+ahRH+bCcjUjNdXX0MnojI5/MRe9oyq2NdeJ3Dc8m6HLowV5BXB7D9fi+LxULW67VsNhtJkkTiOFaM/2Ds8c5Zl7RSWJalzGYz2e12DRVFUchgMNCV53lDKYTT6VTe7/efQnOcz+eSpmkj2v1+l/F4XKmYTCZyu90aZ7IsUyGNlM/ns6aCEc0OL5dLuVwuFeH1etVUzdmUbbdbOR6PvynzQ20sstnj8VDcNTCU1413O+tRO+rG0xxer5cSEhX1qBoOh4pRN/YpTxRFFSkc4F+EQRCo4/P5VEJKEYah9Ho9bcrhcFBHAo1Go2/C/6TMXmfK1hRmq60pjI0ZDWprClmcTqfmHDI2ENdHAiWMihkjZA2xM9QS36855Mk8EY16Go4q3/el3+9XatlnMS74WP1brx6NcK/earXS5V49GtR59douvRusa7/+cfgBiwCOGi+hoEUAAAAASUVORK5CYII=&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="A Venn diagram: the left circle is labelled &quot;A&quot; the right circle is labeled &quot;B&quot; and the overlap is labeled A INTERSECT B" title="A Venn diagram: the left circle is labelled &quot;A&quot; the right circle is labeled &quot;B&quot; and the overlap is labeled A INTERSECT B" src="/static/2630b4fa9a4a437ca3c466cc4218e9b4/b5bda/SetVenn.png" srcSet="/static/2630b4fa9a4a437ca3c466cc4218e9b4/5a46d/SetVenn.png 300w,/static/2630b4fa9a4a437ca3c466cc4218e9b4/0a47e/SetVenn.png 600w,/static/2630b4fa9a4a437ca3c466cc4218e9b4/b5bda/SetVenn.png 643w" sizes="(max-width: 643px) 100vw, 643px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
  </a>
    </span></p><p>And here&#x27;s what an intersection looks like in Typescript:</p><pre class="shiki vitesse-dark twoslash lsp" style="background-color:#121212;color:#dbd7ca"><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#CB7676">type</span><span style="color:#DBD7CA"> </span><span style="color:#A1B567"><data-lsp lsp="type A = {
    a: string;
}">A</data-lsp></span><span style="color:#DBD7CA"> </span><span style="color:#CB7676">=</span><span style="color:#DBD7CA"> </span><span style="color:#858585">{</span><span style="color:#DBD7CA"> </span><span style="color:#B8A965"><data-lsp lsp="(property) a: string">a</data-lsp></span><span style="color:#CB7676">:</span><span style="color:#DBD7CA"> </span><span style="color:#E0A569">string</span><span style="color:#DBD7CA"> </span><span style="color:#858585">};</span></div><div class="line"><span style="color:#CB7676">type</span><span style="color:#DBD7CA"> </span><span style="color:#A1B567"><data-lsp lsp="type B = {
    b: string;
}">B</data-lsp></span><span style="color:#DBD7CA"> </span><span style="color:#CB7676">=</span><span style="color:#DBD7CA"> </span><span style="color:#858585">{</span><span style="color:#DBD7CA"> </span><span style="color:#B8A965"><data-lsp lsp="(property) b: string">b</data-lsp></span><span style="color:#CB7676">:</span><span style="color:#DBD7CA"> </span><span style="color:#E0A569">string</span><span style="color:#DBD7CA"> </span><span style="color:#858585">};</span></div><div class="line"> </div><div class="line"><span style="color:#CB7676">type</span><span style="color:#DBD7CA"> </span><span style="color:#A1B567"><data-lsp lsp="type AB = A &amp; B">AB</data-lsp></span><span style="color:#DBD7CA"> </span><span style="color:#CB7676">=</span><span style="color:#DBD7CA"> </span><span style="color:#A1B567"><data-lsp lsp="type A = {
    a: string;
}">A</data-lsp></span><span style="color:#DBD7CA"> </span><span style="color:#CB7676">&amp;</span><span style="color:#DBD7CA"> </span><span style="color:#A1B567"><data-lsp lsp="type B = {
    b: string;
}">B</data-lsp></span><span style="color:#858585">;</span></div><div class="line"><span style="color:#758575">//   AB = { a: string, b: string }</span></div></code></div></pre><p>Perhaps you can see why this feels backwards to some: in set theory, when you intersect, things &quot;get smaller&quot;. So why did our type &quot;get bigger&quot;? Similarly, when I extend a class with more properties, why is that a &quot;sub&quot;class or a &quot;sub&quot;type?</p><h3>The &quot;Solution&quot;</h3><p>The key insight here is that it&#x27;s not the <em>properties</em> of <code>A</code> and <code>B</code> being intersected, but it&#x27;s the <em>members</em> of those types, i.e. the set of values that are assignable to a given type.</p><p>In the real world, there&#x27;s (practically) infinite values assignable to each of these types, but we can imagine a universe with only four objects:</p><ul><li><code>{}</code></li><li><code>{ a: &quot;a&quot; }</code></li><li><code>{ b: &quot;b&quot; }</code></li><li><code>{ a: &quot;a&quot;, b: &quot;b&quot;}</code></li></ul><p>In this constrained universe, the type <code>A</code> consists of the objects <code>{ a: &quot;a&quot; }</code> and <code>{ a: &quot;a&quot;, b: &quot;b&quot;}</code>, while <code>B</code> consists of <code>{ b: &quot;b&quot; }</code>, and <code>{ a: &quot;a&quot;, b: &quot;b&quot;}</code>, and <code>A &amp; B</code> consists of only <code>{ a: &quot;a&quot;, b: &quot;b&quot;}</code>.</p><p>And here&#x27;s what our intersection looks like:</p><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:743px">
      <a class="gatsby-resp-image-link" href="/static/d242fcfeb2d1b134cfc1e2b2fecee90a/f2793/TypesVenn.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:67%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAC4jAAAuIwF4pT92AAABT0lEQVQ4y4WTaY6DMAyFuf/ZOAC/ilRaaAtdWLoDHn2RXmTaGY2lyIljO+/ZTjLPsyHox+Nhr9cr6NvtZn3fhzvOXdcFzbrf78FPccqBJDIiwzDYbrezw+FgdV0HvdlsrKqqaGPfNI15IF4n2pzPZ9tut/Z8PuNrBGZZZnmeR9s0TXY8Hq0sy69kEeH1eg3JvEARNEKuewVfLhfb7/cL2qyQEJpCpgAQgEYCXR72Pj4uIqS4UEPGcYzNgZZsSNu2YSHv9zuWieapFAEhCU+nU0yEM0iwkUw2zpSBPTb8KYVQY8c/ITMd9MIlFD09krG8DRZCuGgKCeUsijTEO9MUzZ63yX/RFFCu1+tAxY8HM4imxtTLC01TTRdjowM0i6IItaIuakyaprZarcIZO7+HhxibXwf78wWog4bXCeIhii8bWl32yb5+yuef/E/+ivsBTH73GFL+3EMAAAAASUVORK5CYII=&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="A Venn diagram: - the left circle is labelled { a: &quot;a&quot; }, the right circle is labeled { b: &quot;b&quot; }`, the overlap is labeled { a: &quot;a&quot;, b: &quot;b&quot;}, and the area outside is labeled {}" title="A Venn diagram: - the left circle is labelled { a: &quot;a&quot; }, the right circle is labeled { b: &quot;b&quot; }`, the overlap is labeled { a: &quot;a&quot;, b: &quot;b&quot;}, and the area outside is labeled {}" src="/static/d242fcfeb2d1b134cfc1e2b2fecee90a/f2793/TypesVenn.png" srcSet="/static/d242fcfeb2d1b134cfc1e2b2fecee90a/5a46d/TypesVenn.png 300w,/static/d242fcfeb2d1b134cfc1e2b2fecee90a/0a47e/TypesVenn.png 600w,/static/d242fcfeb2d1b134cfc1e2b2fecee90a/f2793/TypesVenn.png 743w" sizes="(max-width: 743px) 100vw, 743px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
  </a>
    </span></p><p>And from this view, the seeming paradox disappears. <code>A</code> has two elements, but when we intersect it with <code>B</code> we&#x27;re left with only one. We intersected <code>A</code> and <code>B</code> and ended up with a smaller set of elements. Typescript&#x27;s type system is normal set theory after all. Phew. 😅</p><h3>Epilogue: Properties As Constraints</h3><p>There&#x27;s a related observation here on properties: while you can think of them as &quot;features&quot; that a given type has, another productive way of thinking about them is as <em>constraints</em>, as limits on what values can be assigned to that type. And seeing them through that lens can be a helpful step towards a more intuitive understanding of TS.</p><p>For example, this &quot;properties as constraints&quot; idea is also the key to understanding the meaning of the type <code>{}</code> in Typescript. It&#x27;s frequently mistaken as &quot;a type for an empty object&quot;, but in reality, it&#x27;s a type with no constraints: in practice this means anything other than <code>undefined</code> or <code>null</code> is assignable to <code>{}</code>.</p><div style="margin-left:30px">You may be surprised that the primitives values are assignable to `{}` - but it helps to remember that primitives can have properties and methods. `{ length: number }` is a potentially useful type that can accept strings (as well as arrays), and so it makes sense that if I remove the `length` constraint string is still assignable.</div><div style="text-align:center">∎∎∎</div></div></main><footer><div class="wrapper"></div></footer></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/is-set-theory-backwards/";window.___webpackCompilationHash="7866019134e71aafdd5f";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-0c729801c756e044498a.js"],"app":["/app-adba66ad070c32904096.js"],"component---src-pages-404-js":["/component---src-pages-404-js-381d227f02ac1a247828.js"],"component---src-pages-blog-mdx-slug-tsx":["/component---src-pages-blog-mdx-slug-tsx-b8159ed7e609b805393c.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-11efd1475dd2716afe22.js"]};/*]]>*/</script><script src="/polyfill-0c729801c756e044498a.js" nomodule=""></script><script src="/app-adba66ad070c32904096.js" async=""></script><script src="/framework-f0c4effda689314d1ba1.js" async=""></script><script src="/webpack-runtime-542295b5f26092b4d18b.js" async=""></script></body></html>